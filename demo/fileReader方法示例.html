<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>fileReader方法示例</title>
	<script type="text/javascript">
		var result=document.getElementById("result");
		var file=document.getElementById("file");
		if (typeof FileReader =='undefined') {
			result.innerHTML="<p>您的浏览器暂不支持FileReader</p>";
			file.setAttribute('disabled','disabled');
		}
		//文件以data url形式读入页面
		function readAsDataURL(){
			//检查是否为图像文件
			var file=document.getElementById("file").files[0];
			if (!/image\/\w+/.test(file.type)) {
				alert("请确保文件为图像类型");
				return false;
			}
			var reader=new FileReader();
			//将文件以Data URL形式读入页面
			reader.readAsDataURL(file);
			reader.onload=function (e){
				var result=document.getElementById("result");
				result.innerHTML='<img src="'+this.result+'" alt=""/>';
			}
		}
		//文件以二进制形式读入页面
		function readAsBinaryString(){
			var file=document.getElementById("file").files[0];
			var reader=new FileReader();
			reader.readAsBinaryString(file);
			reader.onload=function (f){
				var result=document.getElementById("result");
				result.innerHTML=this.result;
			}
		}
		//文件以文本形式读入页面
		function readAsText(){
			var file =document.getElementById("file").files[0];
			var reader=new FileReader();
			reader.readAsText(file);
			reader.onload=function (f){
				var result=document.getElementById("result");
				result.innerHTML=this.result;
			}
		}
	</script>
</head>
<body>
	<p>
		<input type="file" id="file" />
		<input type="button" value="读取图像" onclick="readAsDataURL()" />
		<input type="button" value="读取二进制数据" onclick="readAsBinaryString()" />
		<input type="button" value="读取文本文件"	 onclick="readAsText()" /> 
	</p>
	<div name="result" id="result">
		<!--显示读取结果-->
	</div>
</body>
</html>